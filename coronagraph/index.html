<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Covid-19 Tracker</title>

    <!-- This is a general library to make usage of javascript easier and cross-browser -->
    <script src="js/jquery-3.3.1.min.js"></script>

    <!-- General styling for the page -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700"><!-- The font used on the page -->
    <link rel="stylesheet" href="css/fontawesome.min.css"><!-- Library of icons; this is used for the two icons in the menu -->
    <link rel="stylesheet" href="css/bootstrap.min.css"><!-- The css library used for general styling classes to give the page its layout -->
    <script src="js/bootstrap.min.js"></script> <!-- The javascript side of the bootstrap library; used for the menu on smaller screens -->
    <link rel="stylesheet" href="css/templatemo-style.css"> <!-- General CSS styling of the page -->

    <!-- The library used to draw the chart -->
    <script src="js/Chart.min.js"></script>
</head>



<body id="reportsPage">
    <div class="" id="home">
        <nav class="navbar navbar-expand-xl">
            <div class="container h-100">
                <a class="navbar-brand" href="index.html">
                    <h1 class="tm-site-title mb-0">Tracker</h1>
                </a>
                <button class="navbar-toggler ml-auto mr-0" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fas fa-bars tm-nav-icon"></i>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mx-auto h-100">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">
                                <i class="fas fa-tachometer-alt"></i>
                                Dashboard
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="covidinfo.html">
                                <i class="fas fa-info-circle"></i> COVID info
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="about.html">
                                <i class="far fa-user"></i>
                                About
                            </a>
                        </li>
                    </ul>
                   
                </div>
            </div>

        </nav>
        <div class="container">
            <div class="container mt-5">
                <div class="row tm-content-row">
                    <div class="col-12 tm-block-col" style="margin-bottom:0">
                        <div class="tm-bg-primary-dark tm-block tm-block-h-auto">
                            <h2 class="tm-block-title">What is this page about</h2>
                            <p class="text-white">text</p>
                            <p class="text-white">text</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container-fluid mt-5">
                <div class="tm-bg-primary-dark tm-block">
                    <h2 class="tm-block-title">COVID in Switzerland</h2>
                    <div class="row">
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 mt-3">
                            <label>Timeframe</label>
                            <select id="ct_timeframe">
                                <option value="1">Total</option>
                                <option value="0">Latest month</option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 mt-3">
                            <label>Infected</label>
                            <input type="checkbox" name="ct_cases" checked="checked" />
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 mt-3">
                            <label>Recovered</label>
                            <input type="checkbox" name="ct_recovered" checked="checked" />
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 mt-3">
                            <label>Deaths</label>
                            <input type="checkbox" name="ct_deaths" checked="checked" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 mt-3">
                            <h2 class="tm-block-title mt-5" id="ct_title"></h2>
                            <div id="ct_infected_val" class="country-data">
                                <label>Infected:</label>
                                <span>0</span>
                            </div>
                            <div id="ct_recovered_val" class="country-data">
                                <label>Recovered:</label>
                                <span>0</span>
                            </div>
                            <div id="ct_deaths_val" class="country-data">
                                <label>Deaths:</label>
                                <span>0</span>
                            </div>
                        </div>
                        <div id="countryChart" class="col-lg-9 col-md-9 col-sm-12 col-xs-12 mt-3"></div>
                    </div>
                </div>
            </div>

            <div class="container-fluid mt-5">
                <div class="tm-bg-primary-dark tm-block">
                    <h2 class="tm-block-title">Worldwide COVID Statistics</h2>
                    <div class="row">
                        <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mt-3">
                            <label>Data type</label>
                            <select id="ww_type">
                                <option value="cases">Infections</option>
                                <option value="recovered">Recoveries</option>
                                <option value="deaths">Deaths</option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mt-3">
                            <label>Timeframe</label>
                            <select id="ww_timeframe">
                                <option value="1">Total</option>
                                <option value="0">Last 30 days</option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mt-3">
                            <label><div class="info-ball red"></div> <div class="info-bal-text">Country</div></label>
                            <select id="ww_country1">
                                <option>Afghanistan</option><option>Albania</option><option>Algeria</option><option>Andorra</option><option>Angola</option><option>Antigua and Barbuda</option><option>Argentina</option><option>Armenia</option><option>Australia</option><option>Austria</option><option>Azerbaijan</option><option>Bahamas</option><option>Bahrain</option><option>Bangladesh</option><option>Barbados</option><option>Belarus</option><option>Belgium</option><option>Belize</option><option>Benin</option><option>Bhutan</option><option>Bolivia</option><option>Bosnia</option><option>Botswana</option><option>Brazil</option><option>Brunei</option><option>Bulgaria</option><option>Burkina Faso</option><option>Burma</option><option>Burundi</option><option>Cabo Verde</option><option>Cambodia</option><option>Cameroon</option><option>Canada</option><option>Central African Republic</option><option>Chad</option><option>Chile</option><option>China</option><option>Colombia</option><option>Comoros</option><option>Congo</option><option>DRC</option><option>Costa Rica</option><option>Côte d'Ivoire</option><option>Croatia</option><option>Cuba</option><option>Cyprus</option><option>Czechia</option><option>Denmark</option><option>Diamond Princess</option><option>Djibouti</option><option>Dominica</option><option>Dominican Republic</option><option>Ecuador</option><option>Egypt</option><option>El Salvador</option><option>Equatorial Guinea</option><option>Eritrea</option><option>Estonia</option><option>Swaziland</option><option>Ethiopia</option><option>Fiji</option><option>Finland</option><option>France</option><option>Gabon</option><option>Gambia</option><option>Georgia</option><option>Germany</option><option>Ghana</option><option>Greece</option><option>Grenada</option><option>Guatemala</option><option>Guinea</option><option>Guinea-Bissau</option><option>Guyana</option><option>Haiti</option><option>Holy See</option><option>Honduras</option><option>Hungary</option><option>Iceland</option><option>India</option><option>Indonesia</option><option>Iran</option><option>Iraq</option><option>Ireland</option><option>Israel</option><option>Italy</option><option>Jamaica</option><option>Japan</option><option>Jordan</option><option>Kazakhstan</option><option>Kenya</option><option>S. Korea</option><option>Kosovo</option><option>Kuwait</option><option>Kyrgyzstan</option><option>Lao People's Democratic Republic</option><option>Latvia</option><option>Lebanon</option><option>Lesotho</option><option>Liberia</option><option>Libyan Arab Jamahiriya</option><option>Liechtenstein</option><option>Lithuania</option><option>Luxembourg</option><option>MS Zaandam</option><option>Madagascar</option><option>Malawi</option><option>Malaysia</option><option>Maldives</option><option>Mali</option><option>Malta</option><option>Marshall Islands</option><option>Mauritania</option><option>Mauritius</option><option>Mexico</option><option>Moldova</option><option>Monaco</option><option>Mongolia</option><option>Montenegro</option><option>Morocco</option><option>Mozambique</option><option>Namibia</option><option>Nepal</option><option>Netherlands</option><option>New Zealand</option><option>Nicaragua</option><option>Niger</option><option>Nigeria</option><option>Macedonia</option><option>Norway</option><option>Oman</option><option>Pakistan</option><option>Panama</option><option>Papua New Guinea</option><option>Paraguay</option><option>Peru</option><option>Philippines</option><option>Poland</option><option>Portugal</option><option>Qatar</option><option>Romania</option><option>Russia</option><option>Rwanda</option><option>Saint Kitts and Nevis</option><option>Saint Lucia</option><option>Saint Vincent and the Grenadines</option><option>San Marino</option><option>Sao Tome and Principe</option><option>Saudi Arabia</option><option>Senegal</option><option>Serbia</option><option>Seychelles</option><option>Sierra Leone</option><option>Singapore</option><option>Slovakia</option><option>Slovenia</option><option>Solomon Islands</option><option>Somalia</option><option>South Africa</option><option>South Sudan</option><option>Spain</option><option>Sri Lanka</option><option>Sudan</option><option>Suriname</option><option>Sweden</option><option selected="selected">Switzerland</option><option>Syrian Arab Republic</option><option>Taiwan</option><option>Tajikistan</option><option>Tanzania</option><option>Thailand</option><option>Timor-Leste</option><option>Togo</option><option>Trinidad and Tobago</option><option>Tunisia</option><option>Turkey</option><option>USA</option><option>Uganda</option><option>Ukraine</option><option>UAE</option><option>UK</option><option>Uruguay</option><option>Uzbekistan</option><option>Vanuatu</option><option>Venezuela</option><option>Vietnam</option><option>West Bank and Gaza</option><option>Western Sahara</option><option>Yemen</option><option>Zambia</option><option>Zimbabwe</option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mt-3">
                            <label><div class="info-ball yellow"></div> <div class="info-bal-text">Country</div></label>
                            <select id="ww_country2">
                                <option>Afghanistan</option><option>Albania</option><option>Algeria</option><option>Andorra</option><option>Angola</option><option>Antigua and Barbuda</option><option>Argentina</option><option>Armenia</option><option>Australia</option><option>Austria</option><option>Azerbaijan</option><option>Bahamas</option><option>Bahrain</option><option>Bangladesh</option><option>Barbados</option><option>Belarus</option><option>Belgium</option><option>Belize</option><option>Benin</option><option>Bhutan</option><option>Bolivia</option><option>Bosnia</option><option>Botswana</option><option>Brazil</option><option>Brunei</option><option>Bulgaria</option><option>Burkina Faso</option><option>Burma</option><option>Burundi</option><option>Cabo Verde</option><option>Cambodia</option><option>Cameroon</option><option>Canada</option><option>Central African Republic</option><option>Chad</option><option>Chile</option><option>China</option><option>Colombia</option><option>Comoros</option><option>Congo</option><option>DRC</option><option>Costa Rica</option><option>Côte d'Ivoire</option><option>Croatia</option><option>Cuba</option><option>Cyprus</option><option>Czechia</option><option>Denmark</option><option>Diamond Princess</option><option>Djibouti</option><option>Dominica</option><option>Dominican Republic</option><option>Ecuador</option><option>Egypt</option><option>El Salvador</option><option>Equatorial Guinea</option><option>Eritrea</option><option>Estonia</option><option>Swaziland</option><option>Ethiopia</option><option>Fiji</option><option>Finland</option><option>France</option><option>Gabon</option><option>Gambia</option><option>Georgia</option><option selected="selected">Germany</option><option>Ghana</option><option>Greece</option><option>Grenada</option><option>Guatemala</option><option>Guinea</option><option>Guinea-Bissau</option><option>Guyana</option><option>Haiti</option><option>Holy See</option><option>Honduras</option><option>Hungary</option><option>Iceland</option><option>India</option><option>Indonesia</option><option>Iran</option><option>Iraq</option><option>Ireland</option><option>Israel</option><option>Italy</option><option>Jamaica</option><option>Japan</option><option>Jordan</option><option>Kazakhstan</option><option>Kenya</option><option>S. Korea</option><option>Kosovo</option><option>Kuwait</option><option>Kyrgyzstan</option><option>Lao People's Democratic Republic</option><option>Latvia</option><option>Lebanon</option><option>Lesotho</option><option>Liberia</option><option>Libyan Arab Jamahiriya</option><option>Liechtenstein</option><option>Lithuania</option><option>Luxembourg</option><option>MS Zaandam</option><option>Madagascar</option><option>Malawi</option><option>Malaysia</option><option>Maldives</option><option>Mali</option><option>Malta</option><option>Marshall Islands</option><option>Mauritania</option><option>Mauritius</option><option>Mexico</option><option>Moldova</option><option>Monaco</option><option>Mongolia</option><option>Montenegro</option><option>Morocco</option><option>Mozambique</option><option>Namibia</option><option>Nepal</option><option>Netherlands</option><option>New Zealand</option><option>Nicaragua</option><option>Niger</option><option>Nigeria</option><option>Macedonia</option><option>Norway</option><option>Oman</option><option>Pakistan</option><option>Panama</option><option>Papua New Guinea</option><option>Paraguay</option><option>Peru</option><option>Philippines</option><option>Poland</option><option>Portugal</option><option>Qatar</option><option>Romania</option><option>Russia</option><option>Rwanda</option><option>Saint Kitts and Nevis</option><option>Saint Lucia</option><option>Saint Vincent and the Grenadines</option><option>San Marino</option><option>Sao Tome and Principe</option><option>Saudi Arabia</option><option>Senegal</option><option>Serbia</option><option>Seychelles</option><option>Sierra Leone</option><option>Singapore</option><option>Slovakia</option><option>Slovenia</option><option>Solomon Islands</option><option>Somalia</option><option>South Africa</option><option>South Sudan</option><option>Spain</option><option>Sri Lanka</option><option>Sudan</option><option>Suriname</option><option>Sweden</option><option>Switzerland</option><option>Syrian Arab Republic</option><option>Taiwan</option><option>Tajikistan</option><option>Tanzania</option><option>Thailand</option><option>Timor-Leste</option><option>Togo</option><option>Trinidad and Tobago</option><option>Tunisia</option><option>Turkey</option><option>USA</option><option>Uganda</option><option>Ukraine</option><option>UAE</option><option>UK</option><option>Uruguay</option><option>Uzbekistan</option><option>Vanuatu</option><option>Venezuela</option><option>Vietnam</option><option>West Bank and Gaza</option><option>Western Sahara</option><option>Yemen</option><option>Zambia</option><option>Zimbabwe</option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12 mt-3">
                            <label><div class="info-ball green"></div> <div class="info-bal-text">Country</div></label>
                            <select id="ww_country3">
                                <option>Afghanistan</option><option>Albania</option><option>Algeria</option><option>Andorra</option><option>Angola</option><option>Antigua and Barbuda</option><option>Argentina</option><option>Armenia</option><option>Australia</option><option>Austria</option><option>Azerbaijan</option><option>Bahamas</option><option>Bahrain</option><option>Bangladesh</option><option>Barbados</option><option>Belarus</option><option>Belgium</option><option>Belize</option><option>Benin</option><option>Bhutan</option><option>Bolivia</option><option>Bosnia</option><option>Botswana</option><option>Brazil</option><option>Brunei</option><option>Bulgaria</option><option>Burkina Faso</option><option>Burma</option><option>Burundi</option><option>Cabo Verde</option><option>Cambodia</option><option>Cameroon</option><option>Canada</option><option>Central African Republic</option><option>Chad</option><option>Chile</option><option>China</option><option>Colombia</option><option>Comoros</option><option>Congo</option><option>DRC</option><option>Costa Rica</option><option>Côte d'Ivoire</option><option>Croatia</option><option>Cuba</option><option>Cyprus</option><option>Czechia</option><option>Denmark</option><option>Diamond Princess</option><option>Djibouti</option><option>Dominica</option><option>Dominican Republic</option><option>Ecuador</option><option>Egypt</option><option>El Salvador</option><option>Equatorial Guinea</option><option>Eritrea</option><option>Estonia</option><option>Swaziland</option><option>Ethiopia</option><option>Fiji</option><option>Finland</option><option>France</option><option>Gabon</option><option>Gambia</option><option>Georgia</option><option>Germany</option><option>Ghana</option><option>Greece</option><option>Grenada</option><option>Guatemala</option><option>Guinea</option><option>Guinea-Bissau</option><option>Guyana</option><option>Haiti</option><option>Holy See</option><option>Honduras</option><option>Hungary</option><option>Iceland</option><option>India</option><option>Indonesia</option><option>Iran</option><option>Iraq</option><option>Ireland</option><option>Israel</option><option>Italy</option><option>Jamaica</option><option>Japan</option><option>Jordan</option><option>Kazakhstan</option><option>Kenya</option><option>S. Korea</option><option>Kosovo</option><option>Kuwait</option><option>Kyrgyzstan</option><option>Lao People's Democratic Republic</option><option>Latvia</option><option>Lebanon</option><option>Lesotho</option><option>Liberia</option><option>Libyan Arab Jamahiriya</option><option>Liechtenstein</option><option>Lithuania</option><option>Luxembourg</option><option>MS Zaandam</option><option>Madagascar</option><option>Malawi</option><option>Malaysia</option><option>Maldives</option><option>Mali</option><option>Malta</option><option>Marshall Islands</option><option>Mauritania</option><option>Mauritius</option><option>Mexico</option><option>Moldova</option><option>Monaco</option><option>Mongolia</option><option>Montenegro</option><option>Morocco</option><option>Mozambique</option><option>Namibia</option><option>Nepal</option><option>Netherlands</option><option>New Zealand</option><option>Nicaragua</option><option>Niger</option><option>Nigeria</option><option>Macedonia</option><option>Norway</option><option>Oman</option><option>Pakistan</option><option>Panama</option><option>Papua New Guinea</option><option>Paraguay</option><option>Peru</option><option>Philippines</option><option>Poland</option><option>Portugal</option><option>Qatar</option><option>Romania</option><option>Russia</option><option>Rwanda</option><option>Saint Kitts and Nevis</option><option>Saint Lucia</option><option>Saint Vincent and the Grenadines</option><option>San Marino</option><option>Sao Tome and Principe</option><option>Saudi Arabia</option><option>Senegal</option><option>Serbia</option><option>Seychelles</option><option>Sierra Leone</option><option>Singapore</option><option>Slovakia</option><option>Slovenia</option><option>Solomon Islands</option><option>Somalia</option><option>South Africa</option><option>South Sudan</option><option>Spain</option><option>Sri Lanka</option><option>Sudan</option><option>Suriname</option><option>Sweden</option><option>Switzerland</option><option>Syrian Arab Republic</option><option>Taiwan</option><option>Tajikistan</option><option>Tanzania</option><option>Thailand</option><option>Timor-Leste</option><option>Togo</option><option>Trinidad and Tobago</option><option>Tunisia</option><option>Turkey</option><option selected="selected">USA</option><option>Uganda</option><option>Ukraine</option><option>UAE</option><option>UK</option><option>Uruguay</option><option>Uzbekistan</option><option>Vanuatu</option><option>Venezuela</option><option>Vietnam</option><option>West Bank and Gaza</option><option>Western Sahara</option><option>Yemen</option><option>Zambia</option><option>Zimbabwe</option>
                            </select>
                        </div>
                    </div>
                    <h2 class="tm-block-title mt-5" id="ww_title"></h2>
                    <div id="worldwideChart"></div>
                </div>
            </div>

            <footer class="tm-footer row tm-mt-small">
                <div class="col-12 font-weight-light">
                  <p class="text-center text-white mb-0 px-4 small">
                    Copyright &copy; <b>2020</b> Covid-Tracker by Students FHGR - Webprogrammierung
                  </p>
                </div>
          </footer>
    </div>
    </div>
<script>
    var xhrLineChart = false;
    var xhrBarChart = false;

    //set the chart to white font color
    Chart.defaults.global.defaultFontColor = 'white';

    //EVERYTHING UNDER HERE IS USED TO DISPLAY THE CORRECT DATA ON THE PAGE AND CONNECT THE EVENTS OF ALL THE USER INPUTS

    //update the worldwide chart when a property has been changed in the dropdowns
    $('#ww_type, #ww_timeframe, #ww_country1, #ww_country2, #ww_country3').on('change', function() {
        drawLineChart($('#ww_type').val(), $('#ww_timeframe').val(), $('#ww_country1').val(), $('#ww_country2').val(), $('#ww_country3').val());
    });

    //draw the worldwide chart with the default values when the page loads
    drawLineChart($('#ww_type').val(), $('#ww_timeframe').val(), $('#ww_country1').val(), $('#ww_country2').val(), $('#ww_country3').val());

    //update the Switzerland chart when a property has been changed in the dropdowns
    $('#ct_timeframe, input[name="ct_cases"], input[name="ct_recovered"], input[name="ct_deaths"]').on('change', function() {
        drawBarChart($('#ct_timeframe').val(), $('input[name="ct_cases"]').prop('checked'), $('input[name="ct_recovered"]').prop('checked'), $('input[name="ct_deaths"]').prop('checked'));
    });

    //draw the Switzerland chart with the default values when the page loads
    drawBarChart($('#ct_timeframe').val(), $('input[name="ct_cases"]').prop('checked'), $('input[name="ct_recovered"]').prop('checked'), $('input[name="ct_deaths"]').prop('checked'));

    //EVERYTHING UNDER HERE ARE FUNCTIONS WHICH ARE     USED FOR THE DISPLAY OF DATA WHICH IS DONE IN THE PREVIOUS SECTION

    // function for drawing the barchart and setting the totals for Switzerland cases using a specific set of paramaters
    function drawBarChart(timeframe, infected, recovered, deaths)
    {
        //stop a previous request if we're making a new one before the last one is done
        if (xhrBarChart)
            xhrBarChart.abort();

        //make the AJAX call to the API with the correct timeframe and countries
        xhrBarChart = $.get('https://disease.sh/v3/covid-19/historical/Switzerland?lastdays=' + (timeframe == 1 ? 'all' : '1'), function(data) {
            xhr = false;

            //format the data into groups the chart can read
            data = processDataBarChart(data, infected, recovered, deaths, timeframe);

            //set the title and totals of the general info
            $('#ct_title').text(data.title);

            if (data.total_infected)
                $('#ct_infected_val').show().find('span').text(data.total_infected);
            else
                $('#ct_infected_val').hide();

            if (data.total_recovered)
                $('#ct_recovered_val').show().find('span').text(data.total_recovered);
            else
                $('#ct_recovered_val').hide();

            if (data.total_deaths)
                $('#ct_deaths_val').show().find('span').text(data.total_deaths);
            else
                $('#ct_deaths_val').hide();

            //draw the chart using the ChartJS library
            $('#countryChart').html('<canvas />');
            var ctx = $('#countryChart canvas');
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.labels,
                    datasets: data.dataSets
                },
                options: {
                    responsive: true,
                    legend: {
                        position: "top"
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            });
        });
    }

    // function for drawing the linechart for worldwide cases using a specific set of paramaters
    function drawLineChart(type, timeframe, country1, country2, country3)
    {
        //stop a previous request if we're making a new one before the last one is done
        if (xhrLineChart)
            xhrLineChart.abort();

        //make the AJAX call to the API with the correct timeframe and countries
        xhrLineChart = $.get('https://disease.sh/v3/covid-19/historical/' + country1 + ',' + country2 + ',' + country3 + '?lastdays=' + (timeframe == 1 ? 'all' : '30'), function(data) {
            xhr = false;

            //format the data into groups the chart can read
            data = processDataLineChart(data, type);

            //set the title of the chart showing which data is being used
            let title = '';

            if (type == 'cases') title = 'Infections';
            if (type == 'recovered') title = 'Recoveries';
            if (type == 'deaths') title = 'Deaths';

            $('#ww_title').text(title);

            //draw the chart using the ChartJS library
            $('#worldwideChart').html('<canvas />');
            var ctx = $('#worldwideChart canvas');
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: data.dataSets
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true,
                                max: data.max,
                                min: 0,
                                stepSize: data.stepSize
                            }
                        }]
                    }
                }
            });
        });
    }

    //function which will process the data from the COVID API and format it into data the ChartJS library will understand
    function processDataLineChart(data, type)
    {
        //initialize the return variable which the chart needs to display its data
        let returnVar = {
            dataSets : [
                {
                    label: data[0].country,
                    data: [],
                    backgroundColor: [
                        'rgba(255, 0, 0, 0.1)',

                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                    ],
                    borderWidth: 0,
                    pointRadius: 0
                },
                {
                    label: data[1].country,
                    data: [],
                    backgroundColor: [
                        'rgba(255, 255, 0, 0.1)',

                    ],
                    borderColor: [
                        'rgba(255, 255, 0, 1)',

                    ],
                    borderWidth: 1,
                    pointRadius: 0
                },
                {
                    label: data[2].country,
                    data: [],
                    backgroundColor: [
                        'rgba(0, 255, 0, 0.1)',

                    ],
                    borderColor: [
                        'rgba(0, 255, 0, 1)',
                    ],
                    borderWidth: 1,
                    pointRadius: 0
                }
            ],
            labels : [],
            max : 0,
            stepSize : 0
        }

        //process data from country1
        for (var date in data[0].timeline[type])
        {
            //get the value from the dataset
            let val = data[0].timeline[type][date];

            //add the data to the graph
            returnVar.dataSets[0].data.push(val);

            //add the dates to the x-axis; we only need to do this once as each country has the same dates
            date = date.split('/');
            returnVar.labels.push(date[1] + '/' + date[0] + '/' + date[2]);

            //set the max value of the y-axis
            if (returnVar.max < val)
                returnVar.max = val;
        }

        //process data from country2
        for (var date in data[1].timeline[type])
        {
            //get the value from the dataset
            let val = data[1].timeline[type][date];

            //add the data to the graph
            returnVar.dataSets[1].data.push(val);

            //set the max value of the y-axis
            if (returnVar.max < val)
                returnVar.max = val;
        }

        //process data from country3
        for (var date in data[2].timeline[type])
        {
            //get the value from the dataset
            let val = data[2].timeline[type][date];

            //add the data to the graph
            returnVar.dataSets[2].data.push(val);

            //set the max value of the y-axis
            if (returnVar.max < val)
                returnVar.max = val;
        }

        return returnVar;
    }

    //function which will process the data from the COVID API and format it into data the ChartJS library will understand
    function processDataBarChart(data, infected, recovered, deaths, timeframe)
    {
        let currentMonth = '';
        let dataSet = {};

        //initialize the return variable which the chart needs to display its data
        let returnVar = {
            dataSets : [],
            labels : [],
            total_recovered : 0,
            total_infected : 0,
            total_deaths : 0,
            title: ''
        }

        //create the values for the x-axis
        for (var date in data.timeline.cases) {
            //get current month
            let currentLabel = date.split('/');
            currentLabel = currentLabel[0] + '/' + currentLabel[2];

            //add x-axis item
            if (returnVar.labels.indexOf(currentLabel) == '-1')
                returnVar.labels.push(currentLabel);
        }

        //process data infected
        if (infected)
        {
            dataSet = {};
            for (var date in data.timeline.cases) {
                //get the value from the dataset
                let val = data.timeline.cases[date];

                //get month
                let itemMonth = date.split('/');
                itemMonth = itemMonth[0] + '/' + itemMonth[2];

                //add month to data set
                if (!(itemMonth in dataSet))
                    dataSet[itemMonth] = 0;

                //add value to data set
                dataSet[itemMonth] = val;
            }

            //convert the dataset to something ChartJS can read
            let returnData = [];

            for (var key in dataSet)
                returnData.push(dataSet[key]);

            //set the return value for the ChartJS
            returnVar.dataSets.push({
                label: "Infected",
                backgroundColor: "rgba(255, 99, 132, .6)",
                borderColor: "rgba(255, 99, 132, 1)",
                borderWidth: 1,
                data: returnData
            });

            //set the total value for the general info
            returnVar.total_infected = returnData[returnData.length-1];
        }

        //process data deaths
        if (deaths)
        {
            dataSet = {};
            for (var date in data.timeline.deaths) {
                //get the value from the dataset
                let val = data.timeline.deaths[date];

                //get month
                let itemMonth = date.split('/');
                itemMonth = itemMonth[0] + '/' + itemMonth[2];

                //add month to data set
                if (!(itemMonth in dataSet))
                    dataSet[itemMonth] = 0;

                //add value to data set
                dataSet[itemMonth] = val;
            }

            //convert the dataset to something ChartJS can read
            let returnData = [];

            for (var key in dataSet)
                returnData.push(dataSet[key]);

            //set the return value for the ChartJS
            returnVar.dataSets.push({
                label: "Deaths",
                backgroundColor: "rgba(0, 255, 0, .6)",
                borderColor: "rgba(0, 255, 0, 1)",
                borderWidth: 1,
                data: returnData
            });

            //set the total value for the general info
            returnVar.total_deaths = returnData[returnData.length-1];
        }

        //process data recovered
        if (recovered)
        {
            dataSet = {};
            for (var date in data.timeline.recovered) {
                //get the value from the dataset
                let val = data.timeline.recovered[date];

                //get month
                let itemMonth = date.split('/');
                itemMonth = itemMonth[0] + '/' + itemMonth[2];

                //add month to data set
                if (!(itemMonth in dataSet))
                    dataSet[itemMonth] = 0;

                //add value to data set
                dataSet[itemMonth] = val;
            }

            //convert the dataset to something ChartJS can read
            let returnData = [];

            for (var key in dataSet)
                returnData.push(dataSet[key]);

            //set the return value for the ChartJS
            returnVar.dataSets.push({
                label: "Recovered",
                backgroundColor: "rgba(255, 255, 0, 06)",
                borderColor: "rgba(255, 255, 0, 1)",
                borderWidth: 1,
                data: returnData
            });

            //set the total value for the general info
            returnVar.total_recovered = returnData[returnData.length-1];
        }

        //set title for totals
        returnVar.title = timeframe == 1 ? 'Total' : 'Total for ' + returnVar.labels[0];

        return returnVar;
    }
    </script>

</body>

</html>